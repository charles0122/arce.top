"use strict";(self.webpackChunkarce_top=self.webpackChunkarce_top||[]).push([[240],{94360:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=r(13274),o=r(99128);const i={slug:"spring-cloud-feign",title:"Feign \u8fdc\u7a0b\u8c03\u7528",author:"Arce",author_title:"\u72ec\u7acb\u6e38\u620f\u5f00\u53d1\u8005",author_url:"https://github.com/charles0122",author_image_url:"https://avatars.githubusercontent.com/u/70085736?v=4",description:"\u6d4b\u8bd5",tags:["SpringCloud","Java"],activityId:"\u76f8\u5173\u52a8\u6001 ID",bvid:"\u76f8\u5173\u89c6\u9891 ID\uff08\u4e0e activityId 2\u9009\u4e00\uff09",oid:"oid"},a=void 0,s={permalink:"/arcetop/blog/spring-cloud-feign",editUrl:"https://github.com/charles0122/arce.top/edit/main/arce.top/blog/2023-03-12-spring-cloud-feign.md",source:"@site/blog/2023-03-12-spring-cloud-feign.md",title:"Feign \u8fdc\u7a0b\u8c03\u7528",description:"\u6d4b\u8bd5",date:"2023-03-12T00:00:00.000Z",tags:[{label:"SpringCloud",permalink:"/arcetop/blog/tags/spring-cloud"},{label:"Java",permalink:"/arcetop/blog/tags/java"}],readingTime:.935,hasTruncateMarker:!0,authors:[{name:"Arce",title:"\u72ec\u7acb\u6e38\u620f\u5f00\u53d1\u8005",url:"https://github.com/charles0122",imageURL:"https://avatars.githubusercontent.com/u/70085736?v=4"}],frontMatter:{slug:"spring-cloud-feign",title:"Feign \u8fdc\u7a0b\u8c03\u7528",author:"Arce",author_title:"\u72ec\u7acb\u6e38\u620f\u5f00\u53d1\u8005",author_url:"https://github.com/charles0122",author_image_url:"https://avatars.githubusercontent.com/u/70085736?v=4",description:"\u6d4b\u8bd5",tags:["SpringCloud","Java"],activityId:"\u76f8\u5173\u52a8\u6001 ID",bvid:"\u76f8\u5173\u89c6\u9891 ID\uff08\u4e0e activityId 2\u9009\u4e00\uff09",oid:"oid"},unlisted:!1,prevItem:{title:"Eureka \u6ce8\u518c\u4e2d\u5fc3",permalink:"/arcetop/blog/spring-cloud-eureka"},nextItem:{title:"Gateway \u670d\u52a1\u7f51\u5173",permalink:"/arcetop/blog/spring-cloud-gateway"}},c={authorsImageUrls:[void 0]},l=[];function u(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/",children:"OpenFeign\u5b98\u65b9\u6587\u6863"}),"\nFeign\u548cRestTemplate\u4e00\u6837\uff0c\u4e5f\u662fHTTP\u5ba2\u6237\u7aef\u8bf7\u6c42\u5de5\u5177\uff0c\u4f46\u662f\u5b83\u7684\u4f7f\u7528\u65b9\u5f0f\u66f4\u52a0\u4fbf\u6377\u3002\n\u5728\u9700\u8981\u4f7f\u7528Feign\u7684\u670d\u52a1\u4e2d\u6dfb\u52a0\u4f9d\u8d56"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u5728\u542f\u52a8\u7c7b\u6dfb\u52a0\u6ce8\u89e3 ",(0,n.jsx)(t.code,{children:"@EnableFeignClients"}),"\n\u521b\u5efa\u9700\u8981\u7684Client"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'@FeignClient("UserService")   //\u58f0\u660e\u4e3a UserService \u670d\u52a1\u7684HTTP\u8bf7\u6c42\u5ba2\u6237\u7aef\npublic interface UserClient {\n    //\u8def\u5f84\u4fdd\u8bc1\u548c\u5fae\u670d\u52a1\u63d0\u4f9b\u7684\u4e00\u81f4\u5373\u53ef\n    @GetMapping("/users/{uid}")\n    User getUserById(@PathVariable("uid") int uid);\n}\n'})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'@FeignClient("BookService")\npublic interface BookClient {\n    @GetMapping("/books/{bid}")\n    Book getBookById(@PathVariable int bid);\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"\u4fee\u6539\u4e4b\u524d\u4f7f\u7528Rest Template\u7684\u670d\u52a1"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"@Service\npublic class BorrowServiceImpl implements BorrowService {\n    @Resource\n    private BorrowMapper borrowMapper;\n    @Resource\n    UserClient userClient;\n    @Resource\n    BookClient bookClient;\n    @Override\n    public UserBorrowDetail getUserBorrowDetailByUid(int uid) {\n        List<Borrow> borrowsByUid = borrowMapper.getBorrowsByUid(uid);\n        User user = userClient.getUserById(uid);\n        List<Book> bookList = borrowsByUid\n            .stream()\n            .map(borrow -> bookClient.getBookById(borrow.getBid()))\n            .collect(Collectors.toList());\n        return new UserBorrowDetail(user,bookList);\n    }\n}\n"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},99128:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>s});var n=r(79474);const o={},i=n.createContext(o);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);